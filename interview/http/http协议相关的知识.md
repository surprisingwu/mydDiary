# http协议相关的知识
#### `http`简介
*  `HTTP`协议是`Hyper Text Transfer Protocol`（超文本传输协议）的缩写,是用于从万维网（`WWW:World Wide Web` ）服务器传输超文本到本地浏览器的传送协议。
*  `HTTP`是一个基于`TCP/IP`通信协议来传递数据（`HTML` 文件, 图片文件, 查询结果等)。
*  `HTTP`协议工作于客户端-服务端架构为上。浏览器作为`HTTP`客户端通过`URL`向`HTTP`服务端即`WEB`服务器发送所有请求。`Web`服务器根据接收到的请求后，向客户端发送响应信息。

#### 主要特点
* 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。
* 灵活：`HTTP`允许传输任意类型的数据对象。正在传输的类型由`Content-Type`加以标记。
* 无连接：无连接的含义是限制每次连接只处理一个请求
* 无状态：`HTTP`协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。
* 支持`B/S`及`C/S`模式

#### `http`之`URl`
* 协议部分: 协议有`http,ftp等`
* 域名部分: 也可以使用`ip`地址
* 端口: 省略的话,使用默认的端口
* 虚拟目录部分: 从域名后的第一个“_”开始到最后一个“_”为止，是虚拟目录部分
* 文件名部分: 从域名后的最后一个“_”开始到“？”为止，是文件名部分，如果没有“?”,则是从域名后的最后一个“_”开始到井号为止，是文件部分，如果没有“？”和“井号”，那么从域名后的最后一个“/”开始到结束，都是文件名部分。本例中的文件名是“index.asp”。文件名部分也不是一个URL必须的部分，如果省略该部分，则使用默认的文件名
* 锚部分：从“#”开始到最后，都是锚部分。
* 参数部分：从“？”开始到“#”为止之间的部分为参数部分，又称搜索部分、查询部分。

#### `http`请求消息之`request`
* 请求行`（request line）`、请求头部（`header`）、空行和请求数据四个部分组成。
* 第一部分：请求行，用来说明请求类型,要访问的资源以及所使用的HTTP版本.
* 第二部分：请求头部，紧接着请求行（即第一行）之后的部分，用来说明服务器要使用的附加信息
* 第三部分：空行，请求头部后面的空行是必须的
* 第四部分：请求数据也叫主体，可以添加任意的其他数据。

#### `http`响应消息`response`
* `HTTP`响应也由四个部分组成，分别是：状态行、消息报头、空行和响应正文。
* 第一部分：状态行，由HTTP协议版本号， 状态码， 状态消息 三部分组成。
* 第二部分：消息报头，用来说明客户端要使用的一些附加信息
* 第三部分：空行，消息报头后面的空行是必须的
* 第四部分：响应正文，服务器返回给客户端的文本信息。

#### `http`之状态码
*  1xx：指示信息--表示请求已接收，继续处理
* 2xx：成功--表示请求已被成功接收、理解、接受
* 3xx：重定向--要完成请求必须进行更进一步的操作
* 4xx：客户端错误--请求有语法错误或请求无法实现
* 5xx：服务器端错误--服务器未能实现合法的请求
```
200: 请求成功
302|301: 重定向
304: 未修改.使用缓存的资源
401: 请求需要用户的身份认证
403：服务器理解请求客户端的请求，但是拒绝执行此请求
404: 请求的资源找不到
```
#### http工作原理

* 客户端连接到Web服务器
* 发送`http`请求
* 服务器接受请求并返回`HTTP`响应
* 释放连接`TCP`连接
* 客户端浏览器解析`HTML`内容

```
例如：在浏览器地址栏键入URL，按下回车之后会经历以下流程：

1、浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址;

2、解析出 IP 地址后，根据该 IP 地址和默认端口 80，和服务器建立TCP连接;

3、浏览器发出读取文件(URL 中域名后面部分对应的文件)的HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器;

4、服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器;

5、释放 TCP连接;

6、浏览器将该 html 文本并显示内容; 
```
#### `GET`和`POST`请求的差别
```
GET提交的数据会放在URL之后，以?分割URL和传输数据，参数之间以&相连，如EditPosts.aspx?name=test1&id=123456. POST方法是把提交的数据放在HTTP包的Body中.

GET提交的数据大小有限制（因为浏览器对URL的长度有限制），而POST方法提交的数据没有限制.

GET方式需要使用Request.QueryString来取得变量的值，而POST方式通过Request.Form来获取变量的值。

GET方式提交数据，会带来安全问题，比如一个登录页面，通过GET方式提交数据时，用户名和密码将出现在URL上，如果页面可以被缓存或者其他人可以访问这台机器，就可以从历史记录获得该用户的账号和密码.
```
#mydiary/interview/http